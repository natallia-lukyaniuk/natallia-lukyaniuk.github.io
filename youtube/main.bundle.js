!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.DomUtil=function(){function e(){i(this,e)}return o(e,null,[{key:"createElement",value:function(e,t){var n=document.createElement(e);if(t){var i;(i=n.classList).add.apply(i,r(t))}return n}},{key:"getStyle",value:function(e){return window.getComputedStyle?getComputedStyle(e,""):e.currentStyle}}]),e}(),t.default="DomUtil"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(8);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(6);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var a=n(9);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(18);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.YoutubeService=function(){function e(){r(this,e),this.apiUrl="https://www.googleapis.com/youtube/v3",this.apiKey="AIzaSyCTWC75i70moJLzyNh3tt4jzCljZcRkU8Y",this.nextPageToken=null,this.query=null}return i(e,[{key:"getVideos",value:function(e){var t=this;return(e||this.query)&&this.query!==e&&(this.nextPageToken=null),this.query=e,this.getVideoSnippets(e).then(function(e){var n=e.items,r=n.map(function(e){return e.id.videoId});return t.getVideoStatisticsByIds(r).then(function(t){return Object.assign(e,t)})})}},{key:"getVideoSnippets",value:function(e){var t=this;return new Promise(function(n,r){var i=new XMLHttpRequest,o=t.apiUrl+"/search?key="+t.apiKey+"&type=video&part=snippet&maxResults=15";e&&(o+="&q="+e),t.nextPageToken&&(o+="&pageToken="+t.nextPageToken),i.open("GET",o),i.send(),i.onload=function(){if(i.status>=200&&i.status<300){var e=JSON.parse(i.response);t.nextPageToken=e.nextPageToken,n(e)}else console.error(i.statusText),r(i.statusText)}})}},{key:"getVideoStatisticsByIds",value:function(e){var t=this;return new Promise(function(n,r){var i=new XMLHttpRequest,o=t.apiUrl+"/videos?key="+t.apiKey+"&part=snippet,statistics&id="+e;i.open("GET",o),i.send(),i.onload=function(){i.status>=200&&i.status<300?n(JSON.parse(i.response)):(console.error(i.statusText),r(i.statusText))}})}}],[{key:"url",get:function(){return"https://www.youtube.com"}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),a=n(2),u=n(1),s=t.App=function(){function e(){r(this,e),this.searchQuery="",this.itemsPerPage=e.getItemsPerPage(),this.youtubeService=new o.YoutubeService,this.viewBuilder=new a.ViewBuilder,this.searchControl=new u.SearchControl,this.carouselControl=new u.CarouselControl(this.itemsPerPage),this.paginatorControl=new u.PaginatorControl(this.itemsPerPage)}return i(e,[{key:"run",value:function(){var t=this,n=this.searchControl.getElement();this.viewBuilder.setHeader(n);var r=this.carouselControl.getElement();this.viewBuilder.setMain(r);var i=this.paginatorControl.getElement();this.viewBuilder.setFooter(i);var o=this.viewBuilder.getTemplate();document.body.appendChild(o),this.youtubeService.getVideos().then(function(n){var r=e.getCards(n.items);t.carouselControl.setItems(r),t.paginatorControl.setItemsCount(t.carouselControl.itemsCount)}),window.addEventListener("resize",function(){return t.resizeHandler()}),n.addEventListener("search",function(n){t.searchQuery=n.detail.query,t.youtubeService.getVideos(t.searchQuery).then(function(n){var r=e.getCards(n.items);t.carouselControl.setItems(r),t.paginatorControl.setItemsCount(t.carouselControl.itemsCount),t.paginatorControl.setPage(0)})}),r.addEventListener("swipe",function(n){t.paginatorControl.setPage(t.carouselControl.pageIndex),t.carouselControl.itemsCount-(n.detail.pageIndex+1)*t.carouselControl.itemsPerPage<8&&t.youtubeService.getVideos(t.searchQuery).then(function(n){var r=e.getCards(n.items);t.carouselControl.addItems(r),t.paginatorControl.setItemsCount(t.carouselControl.itemsCount)})}),i.addEventListener("change",function(e){t.carouselControl.setPage(e.detail.pageIndex)})}},{key:"resizeHandler",value:function(){this.itemsPerPage=e.getItemsPerPage(),this.paginatorControl.setItemsPerPage(this.itemsPerPage),this.carouselControl.setItemsPerPage(this.itemsPerPage)}}],[{key:"getCards",value:function(e){return e.map(function(e){var t=e.snippet.title,n=e.snippet.channelTitle+" / "+e.snippet.publishedAt.slice(0,10),r=e.snippet.description,i=o.YoutubeService.url+"/watch?v="+e.id,a=e.snippet.thumbnails.medium.url,s=e.statistics.viewCount+" views",l=e.statistics.likeCount+" likes";return new u.CardControl(t,n,r,i,a,s,l).getElement()})}},{key:"getItemsPerPage",value:function(){var e=window.outerWidth;return e>1100?3:e>730?2:1}}]),e}();(new s).run(),t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CardControl=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=t.CardControl=function(){function e(t,n,i,a,u,s,l){r(this,e),this.element=o.DomUtil.createElement("div",["y-card"]),this.headerAndBodyContainer=o.DomUtil.createElement("div",[]),this.setImage(u),this.cardBodyElement=o.DomUtil.createElement("div",["y-card__body"]),this.headerAndBodyContainer.appendChild(this.cardBodyElement),this.setTitle(t,a),this.setSubTitle(n),this.setDescription(i),this.element.appendChild(this.headerAndBodyContainer),this.setFooter(s,l)}return i(e,[{key:"getElement",value:function(){return this.element}},{key:"setImage",value:function(e){if(e){var t=o.DomUtil.createElement("div",["y-card__header"]),n=o.DomUtil.createElement("img",[]);n.src=e,t.appendChild(n),this.headerAndBodyContainer.appendChild(t)}}},{key:"setTitle",value:function(e,t){if(e&&t){var n=o.DomUtil.createElement("a",["y-card__title"]);n.href=t,n.target="_blank",n.innerHTML=e,n.title=e,this.cardBodyElement.appendChild(n)}}},{key:"setSubTitle",value:function(e){if(e){var t=o.DomUtil.createElement("div",["y-card__sub-title"]);t.innerHTML=e,t.title=e,this.cardBodyElement.appendChild(t)}}},{key:"setDescription",value:function(e){if(e){var t=o.DomUtil.createElement("p",["y-card__description"]);t.innerHTML=e,t.title=e,this.cardBodyElement.appendChild(t)}}},{key:"setFooter",value:function(e,t){var n=o.DomUtil.createElement("div",["y-card__footer"]);if(this.element.appendChild(n),e){var r=o.DomUtil.createElement("div",["y-card__left-footer"]);r.innerHTML=e,n.appendChild(r)}if(t){var i=o.DomUtil.createElement("div",["y-card__right-footer"]);i.innerHTML=t,n.appendChild(i)}}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(14);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CarouselControl=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=t.CarouselControl=function(){function e(t){var n=this;r(this,e),this.element=o.DomUtil.createElement("section",["y-carousel"]),this.itemsCount=0,this.itemsPerPage=t,this.pageIndex=0,this.offset=0,this.startClientX=null,this.element.onmousedown=function(e){return n.mousedownHandler(e)},this.element.ontouchstart=function(e){return n.mousedownHandler(e)},document.body.addEventListener("mouseup",function(e){return n.mouseupHandler(e)}),document.body.addEventListener("touchend",function(e){return n.mouseupHandler(e)})}return i(e,[{key:"getElement",value:function(){return this.element}},{key:"setItems",value:function(e){e&&(this.pageIndex=0,this.offset=0,this.startClientX=null,this.itemsCount=0,this.element.innerHTML="",this.addItems(e),this.setPage(0))}},{key:"addItems",value:function(e){if(e){var t=document.createDocumentFragment();e.forEach(function(e){var n=o.DomUtil.createElement("article",["y-carousel-item"]);n.appendChild(e),t.appendChild(n)}),this.element.appendChild(t),this.itemsCount+=e.length}}},{key:"setPage",value:function(e){this.pageIndex=e;var t=o.DomUtil.getStyle(this.element.parentNode).width,n=parseInt(t,10);this.element.style.marginLeft=-1*this.pageIndex*n+"px";var r=new CustomEvent("swipe",{detail:{pageIndex:this.pageIndex}});this.element.dispatchEvent(r)}},{key:"setItemsPerPage",value:function(e){if(e!==this.itemsPerPage){var t=this.pageIndex*this.itemsPerPage+1,n=Math.ceil(t/e)-1;this.pageIndex=n,this.itemsPerPage=e;var r=o.DomUtil.getStyle(this.element.parentNode).width,i=parseInt(r,10);this.element.style.marginLeft=-1*this.pageIndex*i+"px"}}},{key:"mousedownHandler",value:function(e){var t=this,n=o.DomUtil.getStyle(this.element).marginLeft;this.offset=parseInt(n,10),e.clientX?(this.startClientX=e.clientX,this.element.onmousemove=function(e){return t.mousemoveHandler(e)}):(this.startClientX=e.targetTouches[0].clientX,this.element.ontouchmove=function(e){return t.mousemoveHandler(e)})}},{key:"mouseupHandler",value:function(e){this.element.onmousemove=function(){},(e.clientX||e.changedTouches[0]&&e.changedTouches[0].pageX)<this.startClientX?this.setPage(this.pageIndex+1):this.pageIndex>0&&this.startClientX?this.setPage(this.pageIndex-1):0===this.pageIndex&&this.setPage(0),this.startClientX=null}},{key:"mousemoveHandler",value:function(e){var t=e.clientX||e.targetTouches[0].clientX,n=t-this.startClientX,r=this.offset+n;this.element.style.marginLeft=r+"px"}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(15);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(16);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PaginatorControl=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=t.PaginatorControl=function(){function e(t){var n=this;r(this,e),this.itemsPerPage=t,this.itemsCount=0,this.pageIndex=0,this.element=o.DomUtil.createElement("div",["y-paginator"]);var i=o.DomUtil.createElement("button",["y-paginator__button"]);i.innerHTML="&lsaquo;",this.pageCounterElement=o.DomUtil.createElement("div",["y-counter"]),this.pageCounterElement.innerHTML=this.pageIndex+1;var a=o.DomUtil.createElement("button",["y-paginator__button"]);a.innerHTML="&rsaquo;",this.element.appendChild(i),this.element.appendChild(this.pageCounterElement),this.element.appendChild(a),i.onclick=function(){return n.changePage(n.pageIndex-1)},a.onclick=function(){return n.changePage(n.pageIndex+1)}}return i(e,[{key:"getElement",value:function(){return this.element}},{key:"setItemsPerPage",value:function(e){if(e!==this.itemsPerPage){var t=this.pageIndex*this.itemsPerPage+1,n=Math.ceil(t/e)-1;this.itemsPerPage=e,this.setPage(n)}}},{key:"setItemsCount",value:function(e){e&&(this.itemsCount=e)}},{key:"setPage",value:function(e){e>=0&&e<this.itemsCount/this.itemsPerPage&&(this.pageIndex=e,this.pageCounterElement.innerHTML=this.pageIndex+1)}},{key:"addItemsCount",value:function(e){e&&(this.itemsCount+=e)}},{key:"changePage",value:function(e){if(e>=0&&e<this.itemsCount/this.itemsPerPage){this.pageIndex=e,this.pageCounterElement.innerHTML=this.pageIndex+1;var t=new CustomEvent("change",{detail:{pageIndex:this.pageIndex}});this.element.dispatchEvent(t)}}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(17);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchControl=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=t.SearchControl=function(){function e(){var t=this;r(this,e),this.element=o.DomUtil.createElement("input",["y-search"]),this.element.placeholder="Search",this.element.onkeypress=function(e){if(13===e.keyCode){var n=new CustomEvent("search",{detail:{query:e.target.value}});t.element.dispatchEvent(n)}}}return i(e,[{key:"getElement",value:function(){return this.element}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewBuilder=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=t.ViewBuilder=function(){function e(){r(this,e);var t=o.DomUtil.createElement("div",["youtube"]);this.header=o.DomUtil.createElement("header",["y-header"]),this.main=o.DomUtil.createElement("main",["y-main"]),this.footer=o.DomUtil.createElement("footer",["y-footer"]),t.appendChild(this.header),t.appendChild(this.main),t.appendChild(this.footer),this.template=t}return i(e,[{key:"getTemplate",value:function(){return this.template}},{key:"setHeader",value:function(e){e&&(this.header.innerHTML="",this.header.appendChild(e))}},{key:"setMain",value:function(e){e&&(this.main.innerHTML="",this.main.appendChild(e))}},{key:"setFooter",value:function(e){e&&(this.footer.innerHTML="",this.footer.appendChild(e))}}]),e}();t.default=a},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);
//# sourceMappingURL=main.bundle.map